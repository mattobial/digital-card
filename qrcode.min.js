/* qrcode.js v1.0.0 | MIT | https://github.com/davidshimjs/qrcodejs */
var QRCode;!function(){function n(n){this.mode=a.MODE_8BIT_BYTE,this.data=n,this.parsedData=[];for(var t=0,e=this.data.length;t<e;t++){var r=[],i=this.data.charCodeAt(t);i>65536?(r[0]=240|(1835008&i)>>>18,r[1]=128|(258048&i)>>>12,r[2]=128|(4032&i)>>>6,r[3]=128|63&i):i>2048?(r[0]=224|(61440&i)>>>12,r[1]=128|(4032&i)>>>6,r[2]=128|63&i):i>128?(r[0]=192|(1984&i)>>>6,r[1]=128|63&i):r[0]=i,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function t(n,t){this.typeNumber=n,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function e(n,t){if(void 0==n.length)throw new Error(n.length+"/"+t);for(var e=0;e<n.length&&0==n[e];)e++;this.num=new Array(n.length-e+t);for(var r=0;r<n.length-e;r++)this.num[r]=n[r+e]}function r(){this.buffer=[],this.length=0}function i(){return"undefined"!=typeof CanvasRenderingContext2D}function o(){var n=!1,t=navigator.userAgent;return/android/i.test(t)&&(n=!0,(/android 2\.1/i.test(t)||/android 2\.2/i.test(t))&&(n=!0)),n}function u(n,t){for(var e=1,r=function(n){for(var t=0,e=0,r=0,i=0,o=0,u=0,f=0,a=0,c=0,l=n.length,h=0;h<l;h++){var s=n.charCodeAt(h);s>65536?(t+=4,u+=3):s>2048?(t+=3,u+=2):s>128?(t+=2,u+=2):(t+=1,s<32||s>126?i++:s>=48&&s<=57?o++:s>=65&&s<=90?f++:s>=97&&s<=122?a++:c++),e++}return{byte:t,charCount:e,ctrl:i,num:o,upper:f,lower:a,other:c}}(n),i=0,o=d.length-1;o>=0;o--){var u=0;switch(t){case s.L:u=d[o][0];break;case s.M:u=d[o][1];break;case s.Q:u=d[o][2];break;case s.H:u=d[o][3]}if(r.byte<=u)return e=o+1,i=1,void 0}return e}function f(){}n.prototype={getLength:function(){return this.parsedData.length},write:function(n){for(var t=0,e=this.parsedData.length;t<e;t++)n.put(this.parsedData[t],8)}},t.prototype={addData:function(t){var e=new n(t);this.dataList.push(e),this.dataCache=null},isDark:function(n,t){if(0>n||this.moduleCount<=n||0>t||this.moduleCount<=t)throw new Error(n+","+t);return this.modules[n][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var n=u(this.getData(),this.errorCorrectLevel);this.typeNumber=n}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(n,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++){this.modules[e]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[e][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(n,t),this.typeNumber>=7&&this.setupTypeNumber(n),null==this.dataCache&&(this.dataCache=g(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(n,t){for(var e=-1;7>=e;e++)if(!(n+e<=-1||this.moduleCount<=n+e))for(var r=-1;7>=r;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[n+e][t+r]=e>=0&&e<=6&&(0==r||6==r)||r>=0&&r<=6&&(0==e||6==e)||e>=2&&e<=4&&r>=2&&r<=4?!0:!1)},getBestMaskPattern:function(){for(var n=0,t=0,e=0;e<8;e++){this.makeImpl(!0,e);var r=h.getLostPoint(this);(0==e||n>r)&&(n=r,t=e)}return t},setupTimingPattern:function(){for(var n=8;n<this.moduleCount-8;n++)null==this.modules[n][6]&&(this.modules[n][6]=0==n%2),null==this.modules[6][n]&&(this.modules[6][n]=0==n%2)},setupPositionAdjustPattern:function(){for(var n=h.getPatternPosition(this.typeNumber),t=0;t<n.length;t++)for(var e=0;e<n.length;e++){var r=n[t],i=n[e];null==this.modules[r][i]&&(this.modules[r][i]=h.getMask(1,r,i))}},setupTypeNumber:function(n){for(var t=h.getBCHTypeNumber(this.typeNumber),e=0;e<18;e++){var r=!n&&1==(t>>e&1);this.modules[Math.floor(e/3)][e%3+this.moduleCount-8-3]=r}for(e=0;e<18;e++){r=!n&&1==(t>>e&1);this.modules[e%3+this.moduleCount-8-3][Math.floor(e/3)]=r}},setupTypeInfo:function(n,t){for(var e=h.getBCHTypeInfo(this.errorCorrectLevel<<3|t),r=0;r<15;r++){var i=!n&&1==(e>>r&1);r<6?this.modules[r][8]=i:r<8?this.modules[r+1][8]=i:this.modules[this.moduleCount-15+r][8]=i}for(r=0;r<15;r++){i=!n&&1==(e>>r&1);r<8?this.modules[8][this.moduleCount-1-r]=i:r<9?this.modules[8][15-r-1+1]=i:this.modules[8][15-r-1]=i}this.modules[this.moduleCount-8][8]=!n},mapData:function(n,t){for(var e=-1,r=this.moduleCount-1,i=this.moduleCount-1,o=0;o<this.moduleCount;o+=2){6==o&&o++;for(;;){for(var u=0;u<2;u++)null==this.modules[i][r-u]&&(this.modules[i][r-u]=h.getMask(t,i,r-u)?!n[e++]:n[e++]);i+=e;if(0>i||this.moduleCount<=i){i-=e,e=-e;break}}}},getData:function(){for(var n=[],t=0;t<this.dataList.length;t++)n=n.concat(this.dataList[t].parsedData);return n}},e.prototype={get:function(n){return this.num[n]},getLength:function(){return this.num.length}};var s={L:1,M:0,Q:3,H:2},d=[[19,7,1,19],[34,10,1,34],[55,15,1,55],[80,20,1,80],[108,26,1,108],[136,18,2,68],[156,20,2,78],[194,24,2,97],[232,30,2,116],[274,18,2,68]],h={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50]],getBCHTypeInfo:function(n){for(var t=n<<10;h.getBCHDigit(t)-h.getBCHDigit(1335)>=0;)t^=1335<<h.getBCHDigit(t)-h.getBCHDigit(1335);return(n<<10|t)^21522},getBCHTypeNumber:function(n){for(var t=n<<12;h.getBCHDigit(t)-h.getBCHDigit(7973)>=0;)t^=7973<<h.getBCHDigit(t)-h.getBCHDigit(7973);return n<<12|t},getBCHDigit:function(n){for(var t=0;0!=n;)t++,n>>>=1;return t},getPatternPosition:function(n){return h.PATTERN_POSITION_TABLE[n-1]},getMask:function(n,t,e){switch(n){case 0:return(t+e)%2==0;case 1:return t%2==0;case 2:return e%3==0;case 3:return(t+e)%3==0;case 4:return(Math.floor(t/2)+Math.floor(e/3))%2==0;case 5:return t*e%2+t*e%3==0;case 6:return(t*e%2+t*e%3)%2==0;case 7:return(t*e%3+Math.floor(t+e)%2)%2==0;default:throw new Error("bad maskPattern:"+n)}},getErrorCorrectPolynomial:function(n){for(var t=new e([1],0),r=0;n>r;r++)t=h.multiply(t,new e([1,l.gexp(r)],0));return t},glog:function(n){if(1>n)throw new Error("glog("+n+")");return l.LOG_TABLE[n]},gexp:function(n){for(;n<0;)n+=255;for(;n>=256;)n-=255;return l.EXP_TABLE[n]},multiply:function(n,t){for(var r=new Array(n.getLength()+t.getLength()-1),i=0;i<n.getLength();i++)for(var o=0;o<t.getLength();o++)r[i+o]^=l.gexp(l.glog(n.get(i))+l.glog(t.get(o)));return new e(r,0)},mod:function(n,t){for(;n.getLength()-t.getLength()>=0;){for(var r=l.glog(n.get(0))-l.glog(t.get(0)),i=new Array(n.getLength()),o=0;o<n.getLength();o++)i[o]=n.get(o);for(o=0;o<t.getLength();o++)i[o]^=l.gexp(l.glog(t.get(o))+r);n=new e(i,0);for(;n.get(0)==0;)n=new e(n.num.slice(1),0)}return n},getLostPoint:function(n){for(var t=n.getModuleCount(),e=0,r=0;t>r;r++)for(var i=0;t>i;i++){for(var o=0,u=n.isDark(r,i),f=-1;f<=1;f++)if(!(0>r+f||r+f>=t))for(var a=-1;a<=1;a++)0>i+a||i+a>=t||(0==f&&0==a||(u==n.isDark(r+f,i+a)&&e++));if(e>5)return e+=3}for(r=0;t-1>r;r++)for(i=0;t-1>i;i++){var c=0;n.isDark(r,i)&&c++,n.isDark(r+1,i)&&c++,n.isDark(r,i+1)&&c++,n.isDark(r+1,i+1)&&c++,0!=c&&4!=c||(e+=3)}for(r=0;t>r;r++)for(i=0;t-6>i;i++)n.isDark(r,i)&&!n.isDark(r,i+1)&&n.isDark(r,i+2)&&n.isDark(r,i+3)&&n.isDark(r,i+4)&&!n.isDark(r,i+5)&&n.isDark(r,i+6)&&(e+=40);for(i=0;t>i;i++)for(r=0;t-6>r;r++)n.isDark(r,i)&&!n.isDark(r+1,i)&&n.isDark(r+2,i)&&n.isDark(r+3,i)&&n.isDark(r+4,i)&&!n.isDark(r+5,i)&&n.isDark(r+6,i)&&(e+=40);for(var g=0,v=0,r=0;t>r;r++)for(i=0;t>i;i++)n.isDark(r,i)&&g++;v=Math.abs(100*g/t/t-50)/5;return e+=10*v}};function g(n,t,r){for(var i=function(n,t){var r=d[n-1];if(void 0==r)throw new Error("bad rs block @ typeNumber:"+n);for(var i=[],o=0;o<r.length/3;o++)for(var u=r[3*o+0],f=r[3*o+1],a=r[3*o+2],c=0;c<u;c++)i.push({dataCount:f,totalCount:a});return i}(n,t),o=new v,f=0;f<r.length;f++){var a=r[f];o.put(4,4),o.put(a.getLength(),8);for(var c=0;c<a.parsedData.length;c++)o.put(a.parsedData[c],8)}for(var l=0;l<i.length;l++)o.put(0,8);for(;o.length+4<=8*n*n;)o.put(0,4);for(;o.length%8!=0;)o.putBit(!1);var h=0,g=0,m=0,p=new Array(i.length),w=new Array(i.length);for(l=0;l<i.length;l++){var y=i[l].dataCount,C=i[l].totalCount-y;g=Math.max(g,y),m=Math.max(m,C),p[l]=new Array(y);for(c=0;c<p[l].length;c++)p[l][c]=255&o.buffer[c+h];h+=y;var E=h2.getErrorCorrectPolynomial(C),L=h2.mod(new e(p[l],0),E),M=E.getLength();w[l]=new Array(M);for(c=0;c<M;c++){var B=c+L.getLength()-M;w[l][c]=B>=0?L.get(B):0}}var R=0;for(c=0;c<i.length;c++)R+=i[c].totalCount;var T=new Array(R),k=0;for(c=0;c<g;c++)for(l=0;l<i.length;l++)c<p[l].length&&(T[k++]=p[l][c]);for(c=0;c<m;c++)for(l=0;l<i.length;l++)c<w[l].length&&(T[k++]=w[l][c]);return T}function v(){this.buffer=[],this.length=0}v.prototype={get:function(n){return this.buffer[n]},put:function(n,t){for(var e=0;t>e;e++)this.putBit(1==(n>>>t-e-1&1))},putBit:function(n){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),n&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var l={};l.EXP_TABLE=new Array(256),l.LOG_TABLE=new Array(256);for(var m=0;m<8;m++)l.EXP_TABLE[m]=1<<m;for(m=8;m<256;m++)l.EXP_TABLE[m]=l.EXP_TABLE[m-4]^l.EXP_TABLE[m-5]^l.EXP_TABLE[m-6]^l.EXP_TABLE[m-8];for(m=0;m<255;m++)l.LOG_TABLE[l.EXP_TABLE[m]]=m;var h2=h;QRCode=function(n,e){if(this._el=n,this._htOption=e,this._android=o(),this._oQRCode=null,this._oDrawing=null,this._htOption=this._htOption||{},this._htOption.width=this._htOption.width||256,this._htOption.height=this._htOption.height||256,this._htOption.typeNumber=this._htOption.typeNumber||-1,this._htOption.colorDark=this._htOption.colorDark||"#000000",this._htOption.colorLight=this._htOption.colorLight||"#ffffff",this._htOption.correctLevel=this._htOption.correctLevel||s.H,"string"==typeof this._el&&(this._el=document.getElementById(this._el)),this._oQRCode=new t(this._htOption.typeNumber,this._htOption.correctLevel),this._oQRCode.addData(this._htOption.text||""),this._oQRCode.make(),this._oDrawing=function(n){if(i()){var t=document.createElement("canvas");t.width=n.width,t.height=n.height,n.el.appendChild(t);var e=t.getContext("2d"),r=n.width/n.count,o=n.height/n.count;return{draw:function(i){for(var u=0;u<i.getModuleCount();u++)for(var f=0;f<i.getModuleCount();f++){e.fillStyle=i.isDark(u,f)?n.colorDark:n.colorLight;var a=Math.ceil((f+1)*r)-Math.floor(f*r),c=Math.ceil((u+1)*o)-Math.floor(u*o);e.fillRect(Math.round(f*r),Math.round(u*o),a,c)}},clear:function(){e.clearRect(0,0,t.width,t.height)}}}var e=document.createElement("img");return n.el.appendChild(e),{draw:function(t){e.src=function(n,t){for(var e=n.getModuleCount(),r=t.width/e,i=t.height/e,o=Math.round(r),u=Math.round(i),f=document.createElement("canvas"),a=f.getContext("2d");f.width=t.width,f.height=t.height,a.fillStyle=t.colorLight,a.fillRect(0,0,f.width,f.height),0<e;){for(var c=0;c<e;c++)for(var l=0;l<e;l++)a.fillStyle=n.isDark(c,l)?t.colorDark:t.colorLight,a.fillRect(l*o,c*u,o,u);break}return f.toDataURL()}(t,{width:n.width,height:n.height,colorDark:n.colorDark,colorLight:n.colorLight})},clear:function(){e.src=""}}}({el:this._el,width:this._htOption.width,height:this._htOption.height,colorDark:this._htOption.colorDark,colorLight:this._htOption.colorLight,count:4}),this._oDrawing.draw(this._oQRCode)},QRCode.CorrectLevel=s}();

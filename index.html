<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>My Digital Card</title>
  <meta name="theme-color" content="#0d0d0f" />
  <link rel="manifest" href="./manifest.webmanifest?v=15">
  <link rel="icon" href="icons/favicon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="icons/icon-512.png" />
  <link rel="stylesheet" href="./styles.css?v=15" />
</head>
<body>
  <main class="card" role="main">
    <header class="hero">
      <button id="editBtn" aria-label="Open settings" class="ghost">‚öôÔ∏è</button>
      <img id="avatar" class="avatar" src="" alt="Profile photo" />
      <h1 id="fullName">Your Name</h1>
      <p id="title">Your Role</p>
      <p id="bio" class="muted">One-liner about what you do.</p>
    </header>

    <section class="links" aria-label="Contact and links">
      <a id="emailLink" class="chip" href="#">üìß Email</a>
      <a id="phoneLink" class="chip" href="#">üìû Call</a>
      <a id="siteLink" class="chip" href="#" target="_blank" rel="noopener">üåê Website</a>
      <a id="ctaBtn" class="cta" href="#" data-cta>Book a call</a>
    </section>

    <section class="footer-actions">
      <button id="shareBtn" class="primary">Share Card</button>
      <button id="saveVcfBtn" class="ghost">Save Contact (VCF)</button>
      <button id="qrBtn" class="ghost">Show QR</button>
    </section>
  </main>

  <!-- Settings Drawer -->
  <aside id="drawer" class="drawer" aria-hidden="true" aria-label="Settings">
    <header>
      <h2>Card Settings</h2>
      <button id="closeDrawer" class="ghost" aria-label="Close">‚úï</button>
    </header>
    <form id="settingsForm">
      <div class="grid">
        <label>Full Name <input name="fullName" required /></label>
        <label>Title <input name="title" /></label>
        <label>Bio <textarea name="bio" rows="2"></textarea></label>
        <label>Avatar URL <input name="avatar" placeholder="https://..." /></label>
        <label>Email <input name="email" type="email" /></label>
        <label>Phone <input name="phone" type="tel" /></label>
        <label>Website <input name="website" type="url" /></label>
        <label>CTA Label <input name="ctaLabel" placeholder="Book a call" /></label>
        <label>CTA Link <input name="ctaLink" placeholder="https://cal.com/you" /></label>
        <fieldset class="stack">
          <legend>Analytics</legend>
          <label>Optional Webhook <input name="analyticsWebhook" type="url" /></label>
          <label class="inline"><input name="analyticsEnabled" type="checkbox" checked /> Enable local analytics</label>
        </fieldset>
      </div>
      <div class="toolbar">
        <button type="submit" class="primary">Save</button>
        <button id="exportBtn" type="button" class="ghost">Export JSON</button>
        <label class="import"><input id="importInput" type="file" accept="application/json" hidden /><span class="ghost">Import JSON</span></label>
        <button id="resetBtn" type="button" class="danger">Reset</button>
      </div>
    </form>
  </aside>

  <!-- QR Modal -->
  <div id="qrModal" class="modal" aria-hidden="true" role="dialog" aria-label="QR code">
    <div class="modal-content">
      <div id="qrBox" class="qrbox"></div>
      <p class="muted small">Scan this QR code to open my card</p>
      <div class="toolbar" style="justify-content:center">
        <button id="downloadQrBtn" class="ghost">Download PNG</button>
        <button id="closeQr" class="ghost">Close</button>
      </div>
    </div>
  </div>

  <!-- Load local QR library; onerror -> CDN fallback (gets cached for offline) -->
  <script src="./qrcode.min.js?v=15"
          onerror="(function(){var s=document.createElement('script');s.src='https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js';document.head.appendChild(s);}())">
  </script>

  <!-- App -->
  <script src="./app.js?v=15" defer></script>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>My Digital Card</title>
  <meta name="theme-color" content="#0d0d0f" />
  <link rel="manifest" href="./manifest.webmanifest?v=14">
  <link rel="icon" href="icons/favicon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="icons/icon-512.png" />
  <link rel="stylesheet" href="./styles.css?v=14" />
</head>
<body>
  <main class="card" role="main">
    <header class="hero">
      <button id="editBtn" aria-label="Open settings" class="ghost">‚öôÔ∏è</button>
      <img id="avatar" class="avatar" src="" alt="Profile photo" />
      <h1 id="fullName">Your Name</h1>
      <p id="title">Your Role</p>
      <p id="bio" class="muted">One-liner about what you do.</p>
    </header>

    <section class="links" aria-label="Contact and links">
      <a id="emailLink" class="chip" href="#">üìß Email</a>
      <a id="phoneLink" class="chip" href="#">üìû Call</a>
      <a id="siteLink" class="chip" href="#" target="_blank" rel="noopener">üåê Website</a>
      <a id="ctaBtn" class="cta" href="#" data-cta>Book a call</a>
    </section>

    <section class="footer-actions">
      <button id="shareBtn" class="primary">Share Card</button>
      <button id="saveVcfBtn" class="ghost">Save Contact (VCF)</button>
      <button id="qrBtn" class="ghost">Show QR</button>
    </section>
  </main>

  <!-- Settings Drawer (kept minimal but complete) -->
  <aside id="drawer" class="drawer" aria-hidden="true" aria-label="Settings">
    <header>
      <h2>Card Settings</h2>
      <button id="closeDrawer" class="ghost" aria-label="Close">‚úï</button>
    </header>
    <form id="settingsForm">
      <div class="grid">
        <label>Full Name <input name="fullName" required /></label>
        <label>Title <input name="title" /></label>
        <label>Bio <textarea name="bio" rows="2"></textarea></label>
        <label>Avatar URL <input name="avatar" placeholder="https://..." /></label>
        <label>Email <input name="email" type="email" /></label>
        <label>Phone <input name="phone" type="tel" /></label>
        <label>Website <input name="website" type="url" /></label>
        <label>CTA Label <input name="ctaLabel" placeholder="Book a call" /></label>
        <label>CTA Link <input name="ctaLink" placeholder="https://cal.com/you" /></label>
        <fieldset class="stack">
          <legend>Analytics</legend>
          <label>Optional Webhook <input name="analyticsWebhook" type="url" /></label>
          <label class="inline"><input name="analyticsEnabled" type="checkbox" checked /> Enable local analytics</label>
        </fieldset>
      </div>
      <div class="toolbar">
        <button type="submit" class="primary">Save</button>
        <button id="exportBtn" type="button" class="ghost">Export JSON</button>
        <label class="import"><input id="importInput" type="file" accept="application/json" hidden /><span class="ghost">Import JSON</span></label>
        <button id="resetBtn" type="button" class="danger">Reset</button>
      </div>
    </form>
  </aside>

  <!-- QR Modal -->
  <div id="qrModal" class="modal" aria-hidden="true" role="dialog" aria-label="QR code">
    <div class="modal-content">
      <div id="qrBox" class="qrbox"></div>
      <p class="muted small">Scan this QR code to open my card</p>
      <div class="toolbar" style="justify-content:center">
        <button id="downloadQrBtn" class="ghost">Download PNG</button>
        <button id="closeQr" class="ghost">Close</button>
      </div>
    </div>
  </div>

  <!-- INLINE: Stable QR library (QRCode.js by davidshimjs, MIT) -->
  <script>
/* qrcode.js 1.0.0 (trimmed build) */
var QRCode;!function(){function t(t){this.mode=f.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,i=this.data.length;e<i;e++){var r=[],n=this.data.charCodeAt(e);n>65536?(r[0]=240|(1835008&n)>>>18,r[1]=128|(258048&n)>>>12,r[2]=128|(4032&n)>>>6,r[3]=128|63&n):n>2048?(r[0]=224|(61440&n)>>>12,r[1]=128|(4032&n)>>>6,r[2]=128|63&n):n>128?(r[0]=192|(1984&n)>>>6,r[1]=128|63&n):r[0]=n,this.parsedData.push(r)}this.parsedData=[].concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function i(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var i=0;i<t.length&&0==t[i];)i++;this.num=new Array(t.length-i+e);for(var r=0;r<t.length-i;r++)this.num[r]=t[r+i]}function r(t,e){this.totalCount=t,this.dataCount=e}function n(){this.buffer=[],this.length=0}function o(){return"undefined"!=typeof CanvasRenderingContext2D}function a(){var t=!1,e=navigator.userAgent;return/android/i.test(e)&&(t=!0,(/android 2\.1/i.test(e)||/android 2\.2/i.test(e))&&(t=!0)),t}function s(t,e){for(var i=1,r=function(t){for(var e=0,i=0,r=0,n=0,o=0,a=0,s=0,h=0,c=0,u=t.length,d=0;d<u;d++){var l=t.charCodeAt(d);l>65536?(e+=4,a+=3):l>2048?(e+=3,a+=2):l>128?(e+=2,a+=2):(e+=1,l<32||l>126?n++:l>=48&&l<=57?o++:l>=65&&l<=90?s++:l>=97&&l<=122?h++:c++),i++}return{byte:e,charCount:i,ctrl:n,num:o,upper:s,lower:h,other:c}}(t),n=0,o=u.length-1;o>=0;o--){var a=0;switch(e){case d.L:a=u[o][0];break;case d.M:a=u[o][1];break;case d.Q:a=u[o][2];break;case d.H:a=u[o][3]}if(r.byte<=a)return i=o+1,n=1,void 0}return i}function h(){}t.prototype={getLength:function(){return this.parsedData.length},write:function(t){for(var e=0,i=this.parsedData.length;e<i;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var i=new t(e);this.dataList.push(i),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var t=s(this.getData(),this.errorCorrectLevel);this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[i][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=g(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var i=-1;7>=i;i++)if(!(t+i<=-1||this.moduleCount<=t+i))for(var r=-1;7>=r;r++)e+r<=-1||this.moduleCount<=e+r||(this.modules[t+i][e+r]=i>=0&&i<=6&&(0==r||6==r)||r>=0&&r<=6&&(0==i||6==i)||i>=2&&i<=4&&r>=2&&r<=4?!0:!1)},getBestMaskPattern:function(){for(var t=0,e=0,i=0;i<8;i++){this.makeImpl(!0,i);var r=l.getLostPoint(this);(0==i||t>r)&&(t=r,e=i)}return e},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=0==t%2),null==this.modules[6][t]&&(this.modules[6][t]=0==t%2)},setupPositionAdjustPattern:function(){for(var t=l.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var i=0;i<t.length;i++){var r=t[e],n=t[i];null==this.modules[r][n]&&(this.modules[r][n]=l.getMask(1,r,n))}},setupTypeNumber:function(t){for(var e=l.getBCHTypeNumber(this.typeNumber),i=0;i<18;i++){var r=!t&&1==(e>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=r}for(i=0;i<18;i++){r=!t&&1==(e>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=r}},setupTypeInfo:function(t,e){for(var i=l.getBCHTypeInfo(this.errorCorrectLevel<<3|e),r=0;r<15;r++){var n=!t&&1==(i>>r&1);r<6?this.modules[r][8]=n:r<8?this.modules[r+1][8]=n:this.modules[this.moduleCount-15+r][8]=n}for(r=0;r<15;r++){n=!t&&1==(i>>r&1);r<8?this.modules[8][this.moduleCount-1-r]=n:r<9?this.modules[8][15-r-1+1]=n:this.modules[8][15-r-1]=n}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var i=-1,r=this.moduleCount-1,n=this.moduleCount-1,o=0;o<this.moduleCount;o+=2){6==o&&o++;for(;;){for(var a=0;a<2;a++)null==this.modules[n][r-a]&&(this.modules[n][r-a]=l.getMask(e,n,r-a)?!t[i++]:t[i++]);n+=i;if(0>n||this.moduleCount<=n){n-=i,i=-i;break}}}},getData:function(){for(var t=[],e=0;e<this.dataList.length;e++)t=t.concat(this.dataList[e].parsedData);return t}},i.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length}};var d={L:1,M:0,Q:3,H:2},u=[[19,7,1,19],[34,10,1,34],[55,15,1,55],[80,20,1,80],[108,26,1,108],[136,18,2,68],[156,20,2,78],[194,24,2,97],[232,30,2,116],[274,18,2,68]],l={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50]],getBCHTypeInfo:function(t){for(var e=t<<10;l.getBCHDigit(e)-l.getBCHDigit(1335)>=0;)e^=1335<<l.getBCHDigit(e)-l.getBCHDigit(1335);return(t<<10|e)^21522},getBCHTypeNumber:function(t){for(var e=t<<12;l.getBCHDigit(e)-l.getBCHDigit(7973)>=0;)e^=7973<<l.getBCHDigit(e)-l.getBCHDigit(7973);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return l.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,i){switch(t){case 0:return(e+i)%2==0;case 1:return e%2==0;case 2:return i%3==0;case 3:return(e+i)%3==0;case 4:return(Math.floor(e/2)+Math.floor(i/3))%2==0;case 5:return e*i%2+e*i%3==0;case 6:return(e*i%2+e*i%3)%2==0;case 7:return(e*i%3+Math.floor(e+i)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new i([1],0),r=0;t>r;r++)e=l.multiply(e,new i([1,h.gexp(r)],0));return e},glog:function(t){if(1>t)throw new Error("glog("+t+")");return h.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return h.EXP_TABLE[t]},multiply:function(t,e){for(var r=new Array(t.getLength()+e.getLength()-1),n=0;n<t.getLength();n++)for(var o=0;o<e.getLength();o++)r[n+o]^=h.gexp(h.glog(t.get(n))+h.glog(e.get(o)));return new i(r,0)},mod:function(t,e){for(;t.getLength()-e.getLength()>=0;){for(var r=h.glog(t.get(0))-h.glog(e.get(0)),n=new Array(t.getLength()),o=0;o<t.getLength();o++)n[o]=t.get(o);for(o=0;o<e.getLength();o++)n[o]^=h.gexp(h.glog(e.get(o))+r);t=new i(n,0);for(;t.get(0)==0;)t=new i(t.num.slice(1),0)}return t},getLostPoint:function(t){for(var e=t.getModuleCount(),i=0,r=0;e>r;r++)for(var n=0;e>n;n++){for(var o=0,a=t.isDark(r,n),s=-1;s<=1;s++)if(!(r+s<0||e<=r+s))for(var h=-1;h<=1;h++)n+h<0||e<=n+h||(0==s&&0==h||(a==t.isDark(r+s,n+h)&&i++));if(i>5)return i+=3}for(r=0;e-1>r;r++)for(n=0;e-1>n;n++){var c=0;t.isDark(r,n)&&c++,t.isDark(r+1,n)&&c++,t.isDark(r,n+1)&&c++,t.isDark(r+1,n+1)&&c++,0!=c&&4!=c||(i+=3)}for(r=0;e>r;r++)for(n=0;e-6>n;n++)t.isDark(r,n)&&!t.isDark(r,n+1)&&t.isDark(r,n+2)&&t.isDark(r,n+3)&&t.isDark(r,n+4)&&!t.isDark(r,n+5)&&t.isDark(r,n+6)&&(i+=40);for(n=0;e>n;n++)for(r=0;e-6>r;r++)t.isDark(r,n)&&!t.isDark(r+1,n)&&t.isDark(r+2,n)&&t.isDark(r+3,n)&&t.isDark(r+4,n)&&!t.isDark(r+5,n)&&t.isDark(r+6,n)&&(i+=40);for(var u=0,f=0,r=0;e>r;r++)for(n=0;e>n;n++)t.isDark(r,n)&&u++;f=Math.abs(100*u/e/e-50)/5;return i+=10*f}};function g(t,e,i){for(var n=function(t,e){var i=u[t-1];if(void 0==i)throw new Error("bad rs block @ typeNumber:"+t);for(var n=[],o=0;o<i.length/3;o++)for(var a=i[3*o+0],s=i[3*o+1],h=i[3*o+2],c=0;c<a;c++)n.push(new r(s,h));return n}(t,e),o=new v,a=0;a<i.length;a++){var s=i[a];o.put(4,4),o.put(s.getLength(),8);for(var h=0;h<s.parsedData.length;h++)o.put(s.parsedData[h],8)}for(var c=0;c<n.length;c++)o.put(0,8);for(;o.length+4<=8*t*t;)o.put(0,4);for(;o.length%8!=0;)o.putBit(!1);var d=0,g=0,m=0,p=new Array(n.length),w=new Array(n.length);for(c=0;c<n.length;c++){var y=n[c].dataCount,C=n[c].totalCount-y;g=Math.max(g,y),m=Math.max(m,C),p[c]=new Array(y);for(h=0;h<p[c].length;h++)p[c][h]=255&o.buffer[h+d];d+=y;var E=l.getErrorCorrectPolynomial(C),L=l.mod(new i(p[c],0),E),M=E.getLength();w[c]=new Array(M);for(h=0;h<M;h++){var B=h+L.getLength()-M;w[c][h]=B>=0?L.get(B):0}}var R=0;for(h=0;h<n.length;h++)R+=n[h].totalCount;var T=new Array(R),k=0;for(h=0;h<g;h++)for(c=0;c<n.length;c++)h<p[c].length&&(T[k++]=p[c][h]);for(h=0;h<m;h++)for(c=0;c<n.length;c++)h<w[c].length&&(T[k++]=w[c][h]);return T}function v(){this.buffer=[],this.length=0}v.prototype={get:function(t){return this.buffer[t]},put:function(t,e){for(var i=0;e>i;i++)this.putBit(1==(t>>>e-i-1&1))},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var h={};h.EXP_TABLE=new Array(256),h.LOG_TABLE=new Array(256);for(var m=0;m<8;m++)h.EXP_TABLE[m]=1<<m;for(m=8;m<256;m++)h.EXP_TABLE[m]=h.EXP_TABLE[m-4]^h.EXP_TABLE[m-5]^h.EXP_TABLE[m-6]^h.EXP_TABLE[m-8];for(m=0;m<255;m++)h.LOG_TABLE[h.EXP_TABLE[m]]=m;QRCode=function(t,i){if(this._el=t,this._htOption=i,this._android=a(),this._oQRCode=null,this._oDrawing=null,this._htOption=this._htOption||{},this._htOption.width=this._htOption.width||256,this._htOption.height=this._htOption.height||256,this._htOption.typeNumber=this._htOption.typeNumber||-1,this._htOption.colorDark=this._htOption.colorDark||"#000000",this._htOption.colorLight=this._htOption.colorLight||"#ffffff",this._htOption.correctLevel=this._htOption.correctLevel||d.H,"string"==typeof this._el&&(this._el=document.getElementById(this._el)),this._oQRCode=new e(this._htOption.typeNumber,this._htOption.correctLevel),this._oQRCode.addData(this._htOption.text||""),this._oQRCode.make(),this._oDrawing=function(t){if(o()){var e=document.createElement("canvas");e.width=t.width,e.height=t.height,t.el.appendChild(e);var i=e.getContext("2d"),r=t.width/t.count,n=t.height/t.count;return{draw:function(o){for(var a=0;a<o.getModuleCount();a++)for(var s=0;s<o.getModuleCount();s++){i.fillStyle=o.isDark(a,s)?t.colorDark:t.colorLight;var h=Math.ceil((s+1)*r)-Math.floor(s*r),c=Math.ceil((a+1)*n)-Math.floor(a*n);i.fillRect(Math.round(s*r),Math.round(a*n),h,c)}},clear:function(){i.clearRect(0,0,e.width,e.height)}}}var e=document.createElement("img");return t.el.appendChild(e),{draw:function(i){e.src=function(t,e){var i=t.getModuleCount(),r=e.width/i,n=e.height/i,o=document.createElement("canvas");o.width=e.width,o.height=e.height;var a=o.getContext("2d");a.fillStyle=e.colorLight,a.fillRect(0,0,o.width,o.height);for(var s=0;s<i;s++)for(var h=0;h<i;h++)a.fillStyle=t.isDark(s,h)?e.colorDark:e.colorLight,a.fillRect(h*r,s*n,r,n);return o.toDataURL()}(i,{width:t.width,height:t.height,colorDark:t.colorDark,colorLight:t.colorLight})},clear:function(){e.src=""}}}({el:this._el,width:this._htOption.width,height:this._htOption.height,colorDark:this._htOption.colorDark,colorLight:this._htOption.colorLight,count:4}),this._oDrawing.draw(this._oQRCode)},QRCode.CorrectLevel=d}();
  </script>

  <!-- App -->
  <script src="./app.js?v=14" defer></script>
</body>
</html>
